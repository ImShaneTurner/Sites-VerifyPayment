<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <!-- Import Ant Design CSS stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.17.2/antd.min.css" />
    <!-- Import Axios library for making API requests -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
      header {
        margin: 0;
        padding-left: 24px;
        padding-right: 24px;
        padding-top: 24px;
      }

      html, body {
        height: 100%;
      }

      body {
        flex-direction: column;
        align-items: center;
        margin: 0;
        padding: 0;
        max-width: 960px;
      }

      footer {
        text-align: center;
        height: 48px;
        line-height: 48px;
        background-color: #f0f0f0;
        position: absolute;
        bottom: 0;
        width: 100%;
      }

      .content-block {
        padding-top: 24px;
        padding-left: 24px;
        padding-right: 24px;
      }

      .ant-form {
        padding: 24px;
      }

      .spacer {
        padding: 8px;
      }

      .ant-typography {
        font-size: 24px;
        font-weight: bold;
        padding-top: 0px;
        padding-bottom: 0px;
      }

      hr.solid 
      {
        border-top: 1px solid #B4B4B4;
      }
    </style>
  </head>
  <body>   
    <!-- Title section -->
    <div class="content-block">
      <h1 class="ant-typography">Payment verifier</h1>
      <p>
      I once lost out on a lot of money due to me selling an item on Facebook Marketplace after being presented with a fake proof of payment. <br>
      So, I made this simple site that verifies the proof of payment given to you by the buyer, so that it hopefully doesn't happen to you too. <br>
      Remember, if it doesn't feel right, then decline the sale until payment reflects properly.
      </p>
      <hr class="solid">       
    </div>
    
    <!-- Originating bank -->
    <div class="content-block">    
      <h2 class="ant-typography">Originating bank</h2> 
      <p>The following banks are currently supported.</p>
      <div class="ant-row">
        <div class="ant-col">
          <div class="ant-tag ant-tag-red">ABSA</div>
        </div>
        <div class="ant-col">
          <div class="ant-tag ant-tag-red">Capitec</div>
        </div>
        <div class="ant-col">
          <div class="ant-tag ant-tag-cyan">First National Bank</div>
        </div>
        <div class="ant-col">
          <div class="ant-tag ant-tag-green">Nedbank</div>
        </div>
        <div class="ant-col">
          <div class="ant-tag ant-tag-blue">Standard Bank</div>
        </div>
      </div>
      <div class="spacer">
      </div>
      <!-- Originating Bank dropdown -->
      <div class="ant-form-item">
        <label class="ant-form-item-label" for="originating_bank">Originating Bank:</label>
        <div class="ant-form-item-control">
          <div class="ant-select ant-select-single ant-select-show-arrow">
            <select class="ant-select-selector" id="originating_bank" name="originating_bank" required>
              <option value="bank1">ABSA</option>
              <option value="bank2">Capitec</option>
              <option value="bank3">First National Bank</option>
              <option value="bank4">Nedbank</option>
              <option value="bank4">Standard Bank</option>
            </select>
            <span class="ant-select-arrow"></span>
          </div>
        </div>
      </div>
      <hr class="solid"> 
    </div>
    
    <form id="payment-form" class="ant-form ant-form-horizontal">
      <h2 class="ant-typography">Payment details</h2>
      <p>Please enter the payment details as it appears on the proof of payment</p> 
      <!-- Transaction form -->
      <div class="ant-form-item">
        <label class="ant-form-item-label">Transaction Date:</label>
        <div class="ant-form-item-control">
          <div class="ant-input-group">
            <span class="ant-input-group-addon">
              <i class="anticon anticon-calendar"></i>
            </span>
            <input type="date" name="transaction_date" class="ant-input" required>
          </div>
        </div>
      </div>
      <div class="ant-form-item">
        <label class="ant-form-item-label">Transaction Amount:</label>
        <div class="ant-form-item-control">
          <div class="ant-input-group">
            <span class="ant-input-group-addon">ZAR</span>
            <input type="text" name="transaction_amount" class="ant-input" placeholder="Enter the amount paid to you" min="0" required>
          </div>
        </div>
      </div>
      <div class="ant-form-item">
        <label class="ant-form-item-label">Payment Reference:</label>
        <div class="ant-form-item-control">
          <input type="text" name="payment_reference" class="ant-input" placeholder="Enter the payment reference generated by the bank" required>
        </div>
      </div>
      <div class="ant-form-item">
        <label class="ant-form-item-label">Account Number:</label>
        <div class="ant-form-item-control">
          <input type="text" name="account_number" class="ant-input" placeholder="Enter the account number that payment was made to" required>
        </div>
      </div>
      <div class="ant-form-item">
        <div class="ant-form-item-control">
          <button class="ant-btn ant-btn-primary" onclick="makeApiCall()">Verify payment</button>
        </div>
      </div> 
      <div id="result"></div>   
    </form>
    
    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Import Ant Design JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/4.17.2/antd.min.js"></script>
    
    <script>      
    function formatCurrency(event) {
    const input = event.target;
    const value = input.value.replace(/\D/g, "");
    const formattedValue = new Intl.NumberFormat("en-ZA", { style: "currency", currency: "ZAR" }).format(value / 100);
    input.value = formattedValue;
    }
  
    // Listen to input event on the transaction amount field
    const transactionAmountField = document.querySelector('input[name="transaction_amount"]');
    transactionAmountField.addEventListener("input", formatCurrency);
    </script>
    
    <script>
    function makeApiCall() 
    {
      var transactionDate = document.getElementById("transaction_date").value;
      var transactionAmount = document.getElementById("transaction_amount").value;
      var paymentReference = document.getElementById("payment_reference").value;
      var accountNumber = document.getElementById("account_number").value;

      //if (transactionDate == null || transactionAmount == null || paymentReference == null|| accountNumber == null)
        //return;

      var result = document.getElementById("originating_bank").value;

      if (result == "bank1")
        document.getElementById("result").innerHTML = '<div class="ant-alert ant-alert-success"><span>Payment verified successfully. The payment appears legitimate.</span></div>';
      else
        document.getElementById("result").innerHTML = '<div class="ant-alert ant-alert-error"><span>Payment could not be verified. Please be cautious.</span></div>';
    }
    </script>
  </body>
</html>
