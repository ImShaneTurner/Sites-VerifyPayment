<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <!-- Import Ant Design CSS stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/antd/4.17.2/antd.min.css" />
    <style>
      header {
        margin: 0;
        padding-left: 24px;
        padding-right: 24px;
        padding-top: 24px;
      }

      html, body {
        height: 100%;
      }

      body {
        flex-direction: column;
        align-items: center;
        margin: 0;
        padding: 0;
        max-width: 480px;
      }

      footer {
        text-align: center;
        height: 48px;
        line-height: 48px;
        background-color: #f0f0f0;
        position: absolute;
        bottom: 0;
        width: 100%;
      }

      .ant-form {
        padding: 24px;
      }

      .ant-typography {
        font-size: 24px;
        font-weight: bold;
      }

      hr.solid 
      {
        border-top: 1px solid #B4B4B4;
      }
    </style>
  </head>
  <body>  
  
    <!-- Header -->
    <header>
      <h1 class="ant-typography">Payment verifier</h1>
      <p>
      I once lost out on a lot of money due to me selling an item on Facebook Marketplace after being presented with a fake proof of payment. <br>
      So, I made this simple site that verifies the proof of payment given to you by the buyer, so that it hopefully doesn't happen to you too. <br>
      Remember, if it doesn't feel right, then decline the sale until payment reflects properly.
      </p>

      <!-- Divider -->
      <hr class="solid">       
    </header>    
    <form id="payment-form" class="ant-form ant-form-horizontal">
      <h2 class="ant-typography">Originating bank</h2>
      <p>Select the bank that the payment was made from</p>

      <!-- Originating Bank dropdown -->
      <div class="ant-form-item">
        <label class="ant-form-item-label" for="originating_bank">Originating Bank:</label>
        <div class="ant-form-item-control">
          <div class="ant-select ant-select-single ant-select-show-arrow">
            <select class="ant-select-selector" id="originating_bank" name="originating_bank" required>
              <option value="bank1">ABSA</option>
              <option value="bank2">Capitec</option>
              <option value="bank3">First National Bank</option>
              <option value="bank4">Nedbank</option>
              <option value="bank4">Standard Bank</option>
            </select>
            <span class="ant-select-arrow"></span>
          </div>
        </div>
      </div>

      <!-- Divider -->
      <hr class="solid">   
    </form>    
    <form id="payment-form" class="ant-form ant-form-horizontal">
      <h2 class="ant-typography">Payment details</h2>
      <p>Please enter the payment details as it appears on the proof of payment</p> 
      <!-- Transaction form -->
      <div class="ant-form-item">
        <label class="ant-form-item-label">Transaction Date:</label>
        <div class="ant-form-item-control">
          <div class="ant-input-group">
            <span class="ant-input-group-addon">
              <i class="anticon anticon-calendar"></i>
            </span>
            <input type="date" name="transaction_date" class="ant-input" required>
          </div>
        </div>
      </div>
      <div class="ant-form-item">
        <label class="ant-form-item-label">Transaction Amount:</label>
        <div class="ant-form-item-control">
          <div class="ant-input-group">
            <span class="ant-input-group-addon">ZAR</span>
            <input type="text" name="transaction_amount" class="ant-input" placeholder="Enter the amount paid to you" min="0" required>
          </div>
        </div>
      </div>
      <div class="ant-form-item">
        <label class="ant-form-item-label">Payment Reference:</label>
        <div class="ant-form-item-control">
          <input type="text" name="payment_reference" class="ant-input" placeholder="Enter the payment reference generated by the bank" required>
        </div>
      </div>
      <div class="ant-form-item">
        <label class="ant-form-item-label">Account Number:</label>
        <div class="ant-form-item-control">
          <input type="text" name="account_number" class="ant-input" placeholder="Enter the account number that payment was made to" required>
        </div>
      </div>
      <div class="ant-form-item">
        <div class="ant-form-item-control">
          <button class="ant-btn ant-btn-primary" type="submit">Verify payment</button>
        </div>
      </div>    
    </form>

    <!-- Modal Container -->
    <div id="modal-container"></div> 
    
    <!-- jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Import Ant Design JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/4.17.2/antd.min.js"></script>
    <script>
      // Format input field value to include comma separator and decimal places
      function formatCurrency(event) {
        const input = event.target;
        const value = input.value.replace(/\D/g, "");
        const formattedValue = new Intl.NumberFormat("en-ZA", { style: "currency", currency: "ZAR" }).format(value / 100);
        input.value = formattedValue;
      }
  
      // Listen to input event on the transaction amount field
      const transactionAmountField = document.querySelector('input[name="transaction_amount"]');
      transactionAmountField.addEventListener("input", formatCurrency);

      function showModal() {
        const modal = Antd.Modal.confirm({
          title: 'Confirm action',
          content: 'Are you sure you want to perform this action?',
          onOk: () => {
            // Logic for success state
            Antd.notification.success({
              message: 'Success',
              description: 'Action completed successfully.',
            });
          },
          onCancel: () => {
            // Logic for fail state
            Antd.notification.error({
              message: 'Failed',
              description: 'Action was not completed.',
            });
          },
        });

        // Render modal to the page
        modal.update({
          getContainer: () => document.getElementById('modal-container'),
        });
      }
    </script>
    <script>
      function formatCurrency(amount) {
        // Create a number formatter with ZAR currency and decimal formatting
        const formatter = new Intl.NumberFormat('en-ZA', {
          style: 'currency',
          currency: 'ZAR',
          minimumFractionDigits: 2
        });
    
        // Format the input value with the formatter
        return formatter.format(amount);
      }
    </script>
    <script>
      $(document).ready(function() {
        // Initialize Ant Design dropdown
        const { Select } = antd;
        const { Option } = Select;
        const dropdown = document.getElementById('dropdown');
        ReactDOM.render(
          <Select defaultValue="value1" style={{ width: 120 }} onChange={handleChange}>
            <Option value="value1">Value 1</Option>
            <Option value="value2">Value 2</Option>
          </Select>,
          dropdown
        );

        // Handle dropdown change
        function handleChange(value) {
          if (value === 'value1') {
            $('#content').text('You selected value 1.');
          } else if (value === 'value2') {
            $('#content').text('You selected value 2.');
          }
        }
      });
    </script>
  </body>
</html>
